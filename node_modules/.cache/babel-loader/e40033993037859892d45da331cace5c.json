{"remainingRequest":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/babel-loader/lib/index.js!/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/src/views/Category/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/src/views/Category/Category.vue","mtime":1622267426000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdGFyZW5hL3l1eWluZy9MZWFybmluZy9WdWUzL1Z1ZS1Qcm9qZWN0L21hbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTmF2QmFyIGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL25hdmJhci9OYXZCYXInOwppbXBvcnQgQ2F0ZWdvcnlNZW51IGZyb20gJy4vY2hpbGRDb3Btcy9DYXRlZ29yeU1lbnUnOwppbXBvcnQgTWVudURldGFpbCBmcm9tICcuL2NoaWxkQ29wbXMvTWVudURldGFpbCc7CmltcG9ydCBDb250ZW50RGV0YWlsIGZyb20gJy4vY2hpbGRDb3Btcy9Db250ZW50RGV0YWlsJzsKaW1wb3J0IFNjcm9sbCBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsJzsKaW1wb3J0IFRhYkNvbnRyb2wgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L3RhYkNvbnRyb2wvVGFiQ29udHJvbCc7CmltcG9ydCB7IGdldENhdGVnb3J5LCBnZXRzdWJjYXRlZ29yeSwgZ2V0Q29udGVudERldGFpbCB9IGZyb20gJ25ldHdvcmsvY2F0ZWdvcnkuanMnOwppbXBvcnQgeyBiYWNrVG9wTWl4aW4gfSBmcm9tICdjb21tb24vbWl4aW4uanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NhdGVnb3J5JywKICBjb21wb25lbnRzOiB7CiAgICBOYXZCYXI6IE5hdkJhciwKICAgIENhdGVnb3J5TWVudTogQ2F0ZWdvcnlNZW51LAogICAgTWVudURldGFpbDogTWVudURldGFpbCwKICAgIENvbnRlbnREZXRhaWw6IENvbnRlbnREZXRhaWwsCiAgICBTY3JvbGw6IFNjcm9sbCwKICAgIFRhYkNvbnRyb2w6IFRhYkNvbnRyb2wKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgY2F0ZWdvcnlEYXRhOiBbXSwKICAgICAgY3VycmVudEluZGV4OiAtMSwKICAgICAgY3VycmVudFR5cGU6ICdwb3AnCiAgICB9OwogIH0sCiAgbWl4aW5zOiBbYmFja1RvcE1peGluXSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5fZ2V0Q2F0ZWdvcnkoKTsgLy8gdGhpcy5fZ2V0dWJjYXRlZ29yeSgwKQoKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzaG93U3ViY2F0ZWdvcnk6IGZ1bmN0aW9uIHNob3dTdWJjYXRlZ29yeSgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09PSAtMSkgcmV0dXJuIHt9OwogICAgICByZXR1cm4gdGhpcy5jYXRlZ29yeURhdGFbdGhpcy5jdXJyZW50SW5kZXhdLnN1YmNhdGVnb3JpZXM7CiAgICB9LAogICAgc2hvd0NvbnRlbnREZXRhaWw6IGZ1bmN0aW9uIHNob3dDb250ZW50RGV0YWlsKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPT09IC0xKSByZXR1cm4gW107CiAgICAgIHJldHVybiB0aGlzLmNhdGVnb3J5RGF0YVt0aGlzLmN1cnJlbnRJbmRleF0uY2F0ZWdvcnlEZXRhaWxbdGhpcy5jdXJyZW50VHlwZV07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBfZ2V0Q2F0ZWdvcnk6IGZ1bmN0aW9uIF9nZXRDYXRlZ29yeSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGdldENhdGVnb3J5KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8gMS7ojrflj5bliIbnsbvmlbDmja4KCiAgICAgICAgX3RoaXMuY2F0ZWdvcmllcyA9IHJlcy5kYXRhLmNhdGVnb3J5Lmxpc3Q7IC8vIDIu5Yid5aeL5YyW5q+P5Liq57G75Yir55qE5a2Q5pWw5o2uCgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuY2F0ZWdvcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgX3RoaXMuY2F0ZWdvcnlEYXRhW2ldID0gewogICAgICAgICAgICBzdWJjYXRlZ29yaWVzOiB7fSwKICAgICAgICAgICAgY2F0ZWdvcnlEZXRhaWw6IHsKICAgICAgICAgICAgICAncG9wJzogW10sCiAgICAgICAgICAgICAgJ25ldyc6IFtdLAogICAgICAgICAgICAgICdzZWxsJzogW10KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9IC8vICAg5Li75pWw5o2u6K+35rGC5Yiw5LmL5ZCO5omN6IO95o6l552A6K+35rGC5ZCO6Z2i55qE5a2Q5pWw5o2uCgoKICAgICAgICBfdGhpcy5fZ2V0c3ViY2F0ZWdvcnkoMCk7CiAgICAgIH0pOwogICAgfSwKICAgIF9nZXRzdWJjYXRlZ29yeTogZnVuY3Rpb24gX2dldHN1YmNhdGVnb3J5KGluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgdmFyIG1haWxLZXkgPSB0aGlzLmNhdGVnb3JpZXNbaW5kZXhdLm1haXRLZXk7CiAgICAgIGdldHN1YmNhdGVnb3J5KG1haWxLZXkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgX3RoaXMyLmNhdGVnb3J5RGF0YVtpbmRleF0uc3ViY2F0ZWdvcmllcyA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzMi5jYXRlZ29yeURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpczIuY2F0ZWdvcnlEYXRhKTsKCiAgICAgICAgX3RoaXMyLl9nZXRDb250ZW50RGV0YWlsKCdwb3AnKTsKCiAgICAgICAgX3RoaXMyLl9nZXRDb250ZW50RGV0YWlsKCduZXcnKTsKCiAgICAgICAgX3RoaXMyLl9nZXRDb250ZW50RGV0YWlsKCdzZWxsJyk7CgogICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5jYXRlZ29yeURhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBfZ2V0Q29udGVudERldGFpbDogZnVuY3Rpb24gX2dldENvbnRlbnREZXRhaWwodHlwZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBtaW5pV2FsbGtleSA9IHRoaXMuY2F0ZWdvcmllc1t0aGlzLmN1cnJlbnRJbmRleF0ubWluaVdhbGxrZXk7CiAgICAgIGNvbnNvbGUubG9nKG1pbmlXYWxsa2V5KTsKICAgICAgZ2V0Q29udGVudERldGFpbChtaW5pV2FsbGtleSwgdHlwZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmNhdGVnb3J5RGF0YVtfdGhpczMuY3VycmVudEluZGV4XS5jYXRlZ29yeURldGFpbFt0eXBlXSA9IHJlczsKICAgICAgICBfdGhpczMuY2F0ZWdvcnlEYXRhID0gX29iamVjdFNwcmVhZCh7fSwgX3RoaXMzLmNhdGVnb3J5RGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHRhYkNsaWNrOiBmdW5jdGlvbiB0YWJDbGljayhpbmRleCkgewogICAgICBzd2l0Y2ggKGluZGV4KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICdwb3AnOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMToKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAnbmV3JzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3NlbGwnOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFR5cGUpOwogICAgfSwKICAgIHNlbGVjdEl0ZW06IGZ1bmN0aW9uIHNlbGVjdEl0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy5fZ2V0c3ViY2F0ZWdvcnkoaW5kZXgpOwogICAgfSwKICAgIHNjcm9sbDogZnVuY3Rpb24gc2Nyb2xsKHBvc2l0aW9uKSB7CiAgICAgIHZhciBwb3NpdGlvblkgPSAtcG9zaXRpb24ueTsgLy8gY29uc29sZS5sb2cocG9zaXRpb25ZKTsKCiAgICAgIHRoaXMuc2hvd1RvcCA9IHBvc2l0aW9uWSA+IDEwMDA7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <nav-bar class=\"nav-bar\">\r\n            <template #center>商品分类</template>\r\n        </nav-bar>\r\n        <div class=\"content\">\r\n          <category-menu :categories='categories' @selectItem='selectItem'/>\r\n          <scroll class=\"tab-content\" \r\n          :data='[categoryData]' \r\n          ref=\"scroll\"\r\n          :probe-type='3'\r\n          @scroll=\"scroll\">\r\n          <div>\r\n            <menu-detail :subcategories='showSubcategory'/>\r\n            <tab-control :titles=\"['综合','新品','销量']\" \r\n            @tabClick='tabClick'/>\r\n            <content-detail :content-detail='showContentDetail'/>\r\n          </div>\r\n        </scroll>\r\n        </div>\r\n        <back-top v-show=\"showTop\" @click.native=\"backTop\"></back-top>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from 'components/common/navbar/NavBar'\r\nimport CategoryMenu from './childCopms/CategoryMenu'\r\nimport MenuDetail from './childCopms/MenuDetail'\r\nimport ContentDetail from './childCopms/ContentDetail'\r\nimport Scroll from 'components/common/scroll/Scroll'\r\nimport TabControl from 'components/content/tabControl/TabControl'\r\n\r\nimport {getCategory,getsubcategory,getContentDetail} from 'network/category.js'\r\nimport {backTopMixin} from 'common/mixin.js'\r\nexport default {\r\n  name: 'Category',\r\n  components: {\r\n    NavBar,\r\n    CategoryMenu,\r\n    MenuDetail,\r\n    ContentDetail,\r\n    Scroll,\r\n    TabControl\r\n  },\r\n  data(){\r\n      return {\r\n        categories: [],\r\n        categoryData: [],\r\n        currentIndex: -1,\r\n        currentType: 'pop'\r\n      }\r\n  },\r\n  mixins: [backTopMixin],\r\n  created () {\r\n    this._getCategory()\r\n    // this._getubcategory(0)\r\n  },\r\n  computed: {\r\n    showSubcategory () {\r\n      if(this.currentIndex === -1) return {}\r\n      return this.categoryData[this.currentIndex].subcategories\r\n    },\r\n    showContentDetail () {\r\n      if(this.currentIndex === -1) return []\r\n      return this.categoryData[this.currentIndex].categoryDetail[\r\n        this.currentType\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    _getCategory(){\r\n      getCategory().then(res => {\r\n      console.log(res);\r\n      // 1.获取分类数据\r\n      this.categories = res.data.category.list\r\n      // 2.初始化每个类别的子数据\r\n      for(let i=0; i<this.categories.length; i++) {\r\n        this.categoryData[i] = {\r\n          subcategories: {},\r\n          categoryDetail: {\r\n            'pop': [],\r\n            'new': [],\r\n            'sell': []\r\n          }\r\n        }\r\n      }\r\n    //   主数据请求到之后才能接着请求后面的子数据\r\n      this._getsubcategory(0)\r\n    })\r\n    },\r\n    _getsubcategory(index){\r\n        this.currentIndex = index\r\n        const mailKey = this.categories[index].maitKey\r\n        getsubcategory(mailKey).then(res => {\r\n          console.log(res);\r\n          this.categoryData[index].subcategories = res.data\r\n          this.categoryData = {...this.categoryData}\r\n          this._getContentDetail('pop')\r\n          this._getContentDetail('new')\r\n          this._getContentDetail('sell')\r\n          console.log(this.categoryData);\r\n    })\r\n    },\r\n    _getContentDetail(type) {\r\n      const miniWallkey = this.categories[this.currentIndex].miniWallkey;\r\n      console.log(miniWallkey);\r\n      getContentDetail(miniWallkey, type).then(res => {\r\n          this.categoryData[this.currentIndex].categoryDetail[type] = res\r\n          this.categoryData = {...this.categoryData}\r\n        })\r\n    },\r\n    tabClick (index) {\r\n      switch (index) {\r\n        case 0:\r\n          this.currentType = 'pop'\r\n          break\r\n        case 1:\r\n          this.currentType = 'new'\r\n          break\r\n        case 2:\r\n          this.currentType = 'sell'\r\n          break\r\n      }\r\n      console.log(this.currentType);\r\n    },\r\n    selectItem (index) {\r\n      this._getsubcategory(index)\r\n    },\r\n    scroll (position) {\r\n      const positionY = -position.y\r\n      // console.log(positionY);\r\n      this.showTop = positionY > 1000\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapper {\r\n    /* background: chartreuse; */\r\n    height: 100vh;\r\n}\r\n.nav-bar {\r\n    background: var(--color-tint);\r\n    color: #fff;\r\n    font-weight: 700;\r\n}\r\n.content {\r\n  overflow: hidden;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 44px;\r\n  bottom: 49px;\r\n  display: flex;\r\n}\r\n.tab-content {\r\n  height: 100%;\r\n  flex: 1;\r\n  position: absolute;\r\n  left: 100px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/Category"}]}