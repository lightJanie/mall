{"remainingRequest":"/home/tarena/code/Vue3/Vue-Project/mall/node_modules/babel-loader/lib/index.js!/home/tarena/code/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tarena/code/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tarena/code/Vue3/Vue-Project/mall/src/views/Category/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tarena/code/Vue3/Vue-Project/mall/src/views/Category/Category.vue","mtime":1622267426000},{"path":"/home/tarena/code/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/code/Vue3/Vue-Project/mall/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tarena/code/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/code/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdGFyZW5hL2NvZGUvVnVlMy9WdWUtUHJvamVjdC9tYWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5hdkJhciBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9uYXZiYXIvTmF2QmFyJzsKaW1wb3J0IENhdGVnb3J5TWVudSBmcm9tICcuL2NoaWxkQ29wbXMvQ2F0ZWdvcnlNZW51JzsKaW1wb3J0IE1lbnVEZXRhaWwgZnJvbSAnLi9jaGlsZENvcG1zL01lbnVEZXRhaWwnOwppbXBvcnQgQ29udGVudERldGFpbCBmcm9tICcuL2NoaWxkQ29wbXMvQ29udGVudERldGFpbCc7CmltcG9ydCBTY3JvbGwgZnJvbSAnY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCc7CmltcG9ydCBUYWJDb250cm9sIGZyb20gJ2NvbXBvbmVudHMvY29udGVudC90YWJDb250cm9sL1RhYkNvbnRyb2wnOwppbXBvcnQgeyBnZXRDYXRlZ29yeSwgZ2V0c3ViY2F0ZWdvcnksIGdldENvbnRlbnREZXRhaWwgfSBmcm9tICduZXR3b3JrL2NhdGVnb3J5LmpzJzsKaW1wb3J0IHsgYmFja1RvcE1peGluIH0gZnJvbSAnY29tbW9uL21peGluLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDYXRlZ29yeScsCiAgY29tcG9uZW50czogewogICAgTmF2QmFyOiBOYXZCYXIsCiAgICBDYXRlZ29yeU1lbnU6IENhdGVnb3J5TWVudSwKICAgIE1lbnVEZXRhaWw6IE1lbnVEZXRhaWwsCiAgICBDb250ZW50RGV0YWlsOiBDb250ZW50RGV0YWlsLAogICAgU2Nyb2xsOiBTY3JvbGwsCiAgICBUYWJDb250cm9sOiBUYWJDb250cm9sCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgIGNhdGVnb3J5RGF0YTogW10sCiAgICAgIGN1cnJlbnRJbmRleDogLTEsCiAgICAgIGN1cnJlbnRUeXBlOiAncG9wJwogICAgfTsKICB9LAogIG1peGluczogW2JhY2tUb3BNaXhpbl0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuX2dldENhdGVnb3J5KCk7IC8vIHRoaXMuX2dldHViY2F0ZWdvcnkoMCkKCiAgfSwKICBjb21wdXRlZDogewogICAgc2hvd1N1YmNhdGVnb3J5OiBmdW5jdGlvbiBzaG93U3ViY2F0ZWdvcnkoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gLTEpIHJldHVybiB7fTsKICAgICAgcmV0dXJuIHRoaXMuY2F0ZWdvcnlEYXRhW3RoaXMuY3VycmVudEluZGV4XS5zdWJjYXRlZ29yaWVzOwogICAgfSwKICAgIHNob3dDb250ZW50RGV0YWlsOiBmdW5jdGlvbiBzaG93Q29udGVudERldGFpbCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09PSAtMSkgcmV0dXJuIFtdOwogICAgICByZXR1cm4gdGhpcy5jYXRlZ29yeURhdGFbdGhpcy5jdXJyZW50SW5kZXhdLmNhdGVnb3J5RGV0YWlsW3RoaXMuY3VycmVudFR5cGVdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgX2dldENhdGVnb3J5OiBmdW5jdGlvbiBfZ2V0Q2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRDYXRlZ29yeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8vIDEu6I635Y+W5YiG57G75pWw5o2uCgogICAgICAgIF90aGlzLmNhdGVnb3JpZXMgPSByZXMuZGF0YS5jYXRlZ29yeS5saXN0OyAvLyAyLuWIneWni+WMluavj+S4quexu+WIq+eahOWtkOaVsOaNrgoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLmNhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIF90aGlzLmNhdGVnb3J5RGF0YVtpXSA9IHsKICAgICAgICAgICAgc3ViY2F0ZWdvcmllczoge30sCiAgICAgICAgICAgIGNhdGVnb3J5RGV0YWlsOiB7CiAgICAgICAgICAgICAgJ3BvcCc6IFtdLAogICAgICAgICAgICAgICduZXcnOiBbXSwKICAgICAgICAgICAgICAnc2VsbCc6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSAvLyAgIOS4u+aVsOaNruivt+axguWIsOS5i+WQjuaJjeiDveaOpeedgOivt+axguWQjumdoueahOWtkOaVsOaNrgoKCiAgICAgICAgX3RoaXMuX2dldHN1YmNhdGVnb3J5KDApOwogICAgICB9KTsKICAgIH0sCiAgICBfZ2V0c3ViY2F0ZWdvcnk6IGZ1bmN0aW9uIF9nZXRzdWJjYXRlZ29yeShpbmRleCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgIHZhciBtYWlsS2V5ID0gdGhpcy5jYXRlZ29yaWVzW2luZGV4XS5tYWl0S2V5OwogICAgICBnZXRzdWJjYXRlZ29yeShtYWlsS2V5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIF90aGlzMi5jYXRlZ29yeURhdGFbaW5kZXhdLnN1YmNhdGVnb3JpZXMgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczIuY2F0ZWdvcnlEYXRhID0gX29iamVjdFNwcmVhZCh7fSwgX3RoaXMyLmNhdGVnb3J5RGF0YSk7CgogICAgICAgIF90aGlzMi5fZ2V0Q29udGVudERldGFpbCgncG9wJyk7CgogICAgICAgIF90aGlzMi5fZ2V0Q29udGVudERldGFpbCgnbmV3Jyk7CgogICAgICAgIF90aGlzMi5fZ2V0Q29udGVudERldGFpbCgnc2VsbCcpOwoKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuY2F0ZWdvcnlEYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgX2dldENvbnRlbnREZXRhaWw6IGZ1bmN0aW9uIF9nZXRDb250ZW50RGV0YWlsKHR5cGUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgbWluaVdhbGxrZXkgPSB0aGlzLmNhdGVnb3JpZXNbdGhpcy5jdXJyZW50SW5kZXhdLm1pbmlXYWxsa2V5OwogICAgICBjb25zb2xlLmxvZyhtaW5pV2FsbGtleSk7CiAgICAgIGdldENvbnRlbnREZXRhaWwobWluaVdhbGxrZXksIHR5cGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5jYXRlZ29yeURhdGFbX3RoaXMzLmN1cnJlbnRJbmRleF0uY2F0ZWdvcnlEZXRhaWxbdHlwZV0gPSByZXM7CiAgICAgICAgX3RoaXMzLmNhdGVnb3J5RGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIF90aGlzMy5jYXRlZ29yeURhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICB0YWJDbGljazogZnVuY3Rpb24gdGFiQ2xpY2soaW5kZXgpIHsKICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAncG9wJzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ25ldyc7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICdzZWxsJzsKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRUeXBlKTsKICAgIH0sCiAgICBzZWxlY3RJdGVtOiBmdW5jdGlvbiBzZWxlY3RJdGVtKGluZGV4KSB7CiAgICAgIHRoaXMuX2dldHN1YmNhdGVnb3J5KGluZGV4KTsKICAgIH0sCiAgICBzY3JvbGw6IGZ1bmN0aW9uIHNjcm9sbChwb3NpdGlvbikgewogICAgICB2YXIgcG9zaXRpb25ZID0gLXBvc2l0aW9uLnk7IC8vIGNvbnNvbGUubG9nKHBvc2l0aW9uWSk7CgogICAgICB0aGlzLnNob3dUb3AgPSBwb3NpdGlvblkgPiAxMDAwOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <nav-bar class=\"nav-bar\">\r\n            <template #center>商品分类</template>\r\n        </nav-bar>\r\n        <div class=\"content\">\r\n          <category-menu :categories='categories' @selectItem='selectItem'/>\r\n          <scroll class=\"tab-content\" \r\n          :data='[categoryData]' \r\n          ref=\"scroll\"\r\n          :probe-type='3'\r\n          @scroll=\"scroll\">\r\n          <div>\r\n            <menu-detail :subcategories='showSubcategory'/>\r\n            <tab-control :titles=\"['综合','新品','销量']\" \r\n            @tabClick='tabClick'/>\r\n            <content-detail :content-detail='showContentDetail'/>\r\n          </div>\r\n        </scroll>\r\n        </div>\r\n        <back-top v-show=\"showTop\" @click.native=\"backTop\"></back-top>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from 'components/common/navbar/NavBar'\r\nimport CategoryMenu from './childCopms/CategoryMenu'\r\nimport MenuDetail from './childCopms/MenuDetail'\r\nimport ContentDetail from './childCopms/ContentDetail'\r\nimport Scroll from 'components/common/scroll/Scroll'\r\nimport TabControl from 'components/content/tabControl/TabControl'\r\n\r\nimport {getCategory,getsubcategory,getContentDetail} from 'network/category.js'\r\nimport {backTopMixin} from 'common/mixin.js'\r\nexport default {\r\n  name: 'Category',\r\n  components: {\r\n    NavBar,\r\n    CategoryMenu,\r\n    MenuDetail,\r\n    ContentDetail,\r\n    Scroll,\r\n    TabControl\r\n  },\r\n  data(){\r\n      return {\r\n        categories: [],\r\n        categoryData: [],\r\n        currentIndex: -1,\r\n        currentType: 'pop'\r\n      }\r\n  },\r\n  mixins: [backTopMixin],\r\n  created () {\r\n    this._getCategory()\r\n    // this._getubcategory(0)\r\n  },\r\n  computed: {\r\n    showSubcategory () {\r\n      if(this.currentIndex === -1) return {}\r\n      return this.categoryData[this.currentIndex].subcategories\r\n    },\r\n    showContentDetail () {\r\n      if(this.currentIndex === -1) return []\r\n      return this.categoryData[this.currentIndex].categoryDetail[\r\n        this.currentType\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    _getCategory(){\r\n      getCategory().then(res => {\r\n      console.log(res);\r\n      // 1.获取分类数据\r\n      this.categories = res.data.category.list\r\n      // 2.初始化每个类别的子数据\r\n      for(let i=0; i<this.categories.length; i++) {\r\n        this.categoryData[i] = {\r\n          subcategories: {},\r\n          categoryDetail: {\r\n            'pop': [],\r\n            'new': [],\r\n            'sell': []\r\n          }\r\n        }\r\n      }\r\n    //   主数据请求到之后才能接着请求后面的子数据\r\n      this._getsubcategory(0)\r\n    })\r\n    },\r\n    _getsubcategory(index){\r\n        this.currentIndex = index\r\n        const mailKey = this.categories[index].maitKey\r\n        getsubcategory(mailKey).then(res => {\r\n          console.log(res);\r\n          this.categoryData[index].subcategories = res.data\r\n          this.categoryData = {...this.categoryData}\r\n          this._getContentDetail('pop')\r\n          this._getContentDetail('new')\r\n          this._getContentDetail('sell')\r\n          console.log(this.categoryData);\r\n    })\r\n    },\r\n    _getContentDetail(type) {\r\n      const miniWallkey = this.categories[this.currentIndex].miniWallkey;\r\n      console.log(miniWallkey);\r\n      getContentDetail(miniWallkey, type).then(res => {\r\n          this.categoryData[this.currentIndex].categoryDetail[type] = res\r\n          this.categoryData = {...this.categoryData}\r\n        })\r\n    },\r\n    tabClick (index) {\r\n      switch (index) {\r\n        case 0:\r\n          this.currentType = 'pop'\r\n          break\r\n        case 1:\r\n          this.currentType = 'new'\r\n          break\r\n        case 2:\r\n          this.currentType = 'sell'\r\n          break\r\n      }\r\n      console.log(this.currentType);\r\n    },\r\n    selectItem (index) {\r\n      this._getsubcategory(index)\r\n    },\r\n    scroll (position) {\r\n      const positionY = -position.y\r\n      // console.log(positionY);\r\n      this.showTop = positionY > 1000\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapper {\r\n    /* background: chartreuse; */\r\n    height: 100vh;\r\n}\r\n.nav-bar {\r\n    background: var(--color-tint);\r\n    color: #fff;\r\n    font-weight: 700;\r\n}\r\n.content {\r\n  overflow: hidden;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 44px;\r\n  bottom: 49px;\r\n  display: flex;\r\n}\r\n.tab-content {\r\n  height: 100%;\r\n  flex: 1;\r\n  position: absolute;\r\n  left: 100px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/Category"}]}