{"remainingRequest":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/src/views/Home/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/src/views/Home/Home.vue","mtime":1622267426000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/yuying/Learning/Vue3/Vue-Project/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDliIblnZfmlL7nva7vvIzkvJjpm4XvvIzmlrnkvr/nrqHnkIbjgIHnu7TmiqQNCmltcG9ydCBIb21lU3dpcGVyIGZyb20gJy4vY2hpbGRDb21wcy9Ib21lU3dpcGVyJyAvLyDlr7zlhaXnmoTnu4Tku7bmlL7kuIDotbcNCmltcG9ydCBIb21lUmVjb21tZW5kVmlldyBmcm9tICcuL2NoaWxkQ29tcHMvSG9tZVJlY29tbWVuZFZpZXcnDQppbXBvcnQgRmVhdHVyZVZpZXcgZnJvbSAnLi9jaGlsZENvbXBzL0ZlYXR1cmVWaWV3Jw0KDQppbXBvcnQgTmF2QmFyIGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL25hdmJhci9OYXZCYXInDQppbXBvcnQgVGFiQ29udHJvbCBmcm9tICdjb21wb25lbnRzL2NvbnRlbnQvdGFiQ29udHJvbC9UYWJDb250cm9sJw0KaW1wb3J0IEdvb2RzTGlzdCBmcm9tICdjb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0Jw0KaW1wb3J0IFNjcm9sbCBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsJw0KaW1wb3J0IEJhY2tUb3AgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L2JhY2tUb3AvQmFja1RvcCcNCg0KaW1wb3J0IHsgDQogIGdldEhvbWVNdWx0aWRhdGEsDQogIGdldEhvbWVHb29kcw0KfSBmcm9tICduZXR3b3JrL2hvbWUuanMnDQovLyBpbXBvcnQge2RlYm91bmNlfSBmcm9tICdjb21tb24vdXRpbHMuanMnIOa3t+WFpeWQjuWwseS4jemcgOimgeWGjemHjeWkjeW8leWFpeS6hg0KaW1wb3J0IHtpdGVtTGlzdGVuZXJNaXhpbn0gZnJvbSAnY29tbW9uL21peGluLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnSG9tZScsDQogIGNvbXBvbmVudHM6IHsNCiAgICBOYXZCYXIsDQogICAgSG9tZVN3aXBlciwNCiAgICBIb21lUmVjb21tZW5kVmlldywNCiAgICBGZWF0dXJlVmlldywNCiAgICBUYWJDb250cm9sLA0KICAgIEdvb2RzTGlzdCwNCiAgICBTY3JvbGwsDQogICAgQmFja1RvcA0KICB9LA0KICAvLyDmt7flhaUNCiAgbWl4aW5zOiBbaXRlbUxpc3RlbmVyTWl4aW5dLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgICAvLyByZXN1bHQ6IG51bGwNCiAgICAgICAgYmFubmVyczogW10sDQogICAgICAgIHJlY29tbWVuZHM6IFtdLA0KICAgICAgICBnb29kczogew0KICAgICAgICAgICdwb3AnOiB7cGFnZTogMCwgbGlzdDpbXX0sDQogICAgICAgICAgJ25ldyc6IHtwYWdlOiAwLCBsaXN0OltdfSwNCiAgICAgICAgICAnc2VsbCc6IHtwYWdlOiAwLCBsaXN0OltdfQ0KICAgICAgICB9LA0KICAgICAgICBjdXJyZW50VHlwZTogJ3BvcCcsDQogICAgICAgIHNob3dUb3A6IGZhbHNlLA0KICAgICAgICB0YWJPZmZzZXRUb3A6IDAsDQogICAgICAgIGlzVGFiRml4ZWQ6IGZhbHNlLA0KICAgICAgICBzYXZlWTogMA0KICAgICAgICAvLyBpdGVtSW1nTGlzdGVuZXI6IG51bGwg6YCa6L+H5re35YWlbWl4aW5z5a+85YWlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogeyAvLyDpobXpnaLlsZXnpLrlpITnmoTku6PnoIHlpKrlpI3mnYLvvIzlj6/mlL7lnKjorqHnrpflsZ7mgKfkuK3lsIHoo4XvvIzkvb/kuIrpnaLnmoTku6PnoIHnroDljJYNCiAgICBzaG93R29vZHMgKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZ29vZHNbdGhpcy5jdXJyZW50VHlwZV0ubGlzdA0KICAgIH0NCiAgfSwNCiAgLy8gZGVzdHJveWVkICgpIHsNCiAgLy8gICBjb25zb2xlLmxvZygnaG9tZSBkZXN0cm95ZWQnKTsNCiAgLy8gfSwNCiAgYWN0aXZhdGVkICgpIHsNCiAgICAvLyDov5vlhaXml7bmu5rliqjliLDnprvlvIDml7bnmoTkvY3nva50aGlzLnNhdmVZDQogICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgdGhpcy5zYXZlWSwgMCkNCiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCkgLy8g6L+b5YWl5pe25YaN5Yi35paw77yM6YG/5YWN5Ye6546w5bCP6Zeu6aKYDQogIH0sDQogIGRlYWN0aXZhdGVkICgpIHsNCiAgICAvLyDkv53lrZjnprvlvIDml7bnmoTkvY3nva7kv6Hmga/liLB0aGlzLnNhdmVZDQogICAgdGhpcy5zYXZlWSA9IHRoaXMuJHJlZnMuc2Nyb2xsLmdldFNjcm9sbFkoKQ0KICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2F2ZVkpOw0KICAgIC8vIDIu5Y+W5raI5YWo5bGA5LqL5Lu255uR5ZCs77yI5Li76aG15Zu+54mH5Yqg6L2955qE55uR5ZCs77yJ5Zug5Li65q2k5pe26K6+572u5LqGa2VlcC1hbGl2Ze+8jOaJgOS7peemu+W8gOaXtuiwg+eUqOeahOaYr2RlYWN0aXZhdGVkKCkNCiAgICB0aGlzLiRidXMuJG9mZignaXRlbUltYWdlTG9hZCcsdGhpcy5pdGVtSW1nTGlzdGVuZXIpDQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIC8vIOWwhmNyZWF0ZWTpkqnlrZDkuK3nmoTku6PnoIHnroDljJbvvIzlpITnkIbkuLvopoHpgLvovpHvvIzlhbfkvZPnmoTmlrnms5Xlrp7njrDkuqTnu5ltZXRob2RzDQogICAgLy8gMS7or7fmsYLlpJrkuKrmlbDmja4NCiAgICB0aGlzLmdldEhvbWVNdWx0aWRhdGEoKQ0KICAgIC8vIDIu6K+35rGC5ZWG5ZOB5pWw5o2uDQogICAgdGhpcy5nZXRIb21lR29vZHMoJ3BvcCcpDQogICAgdGhpcy5nZXRIb21lR29vZHMoJ25ldycpDQogICAgdGhpcy5nZXRIb21lR29vZHMoJ3NlbGwnKQ0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICAvLyDliKnnlKjmt7flhaXvvIzlh4/lsJHph43lpI3ku6PnoIENCiAgICAvLyAxLuebkeWQrGl0ZW3kuK3lm77niYfliqDovb3lrozmiJDvvIzliLfmlrDpmLLmipblh73mlbDmlL7liLDkuoZ1dGlscy5qc+S4re+8jOW3peWFt+W6kw0KICAgIC8vIGNvbnN0IHJlZnJlc2ggPSBkZWJvdW5jZSh0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoLDUwKQ0KICAgICAgLy8g5a+555uR5ZCs55qE5LqL5Lu26L+b6KGM5L+d5a2Y77yM5pa55L6/56a75byAaG9tZee7hOS7tuaXtuWPlua2iOatpOS6i+S7tuebkeWQrA0KICAgICAgLy8gdGhpcy5pdGVtSW1nTGlzdGVuZXIgPSAoKSA9PiB7IHJlZnJlc2goKSB9DQogICAgLy8gdGhpcy4kYnVzLiRvbignaXRlbUltYWdlTG9hZCcsKCkgPT4gew0KICAgICAgLy8gdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpDQogICAgICAvLyByZWZyZXNoKCkgLy8g5q2k5aSE5piv6Zet5YyF77yM5bGA6YOo5Y+Y6YeP5LiN5Lya6KKr6ZSA5q+BDQogICAgLy8gfSkNCiAgICAgIC8vIHRoaXMuJGJ1cy4kb24oJ2l0ZW1JbWFnZUxvYWQnLCB0aGlzLml0ZW1JbWdMaXN0ZW5lcikNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOS6i+S7tuebkeWQrOebuOWFs+aWueazlQ0KICAgIC8vIGRlYm91bmNlKGZ1bmMsZGVsYXkpeyDlsIHoo4UNCiAgICAvLyAgIGxldCB0aW1lciA9IG51bGwgLy8g5q2k5aSE5Lmf5piv5bGA6YOo5Y+Y6YeP77yM5L2G5LiL6Z2i5b2i5oiQ5LqG6Zet5YyF77yM5q2k5bGA6YOo5Y+Y6YeP5bCx5LiN5Lya6KKr6ZSA5q+BDQogICAgLy8gICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncyl7IC8vIOWPr+iuqWZ1bmPlh73mlbDkvKDlpJrkuKrlj4LmlbANCiAgICAvLyAgICAgaWYodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcikgLy8g5aaC5p6c5LiK5LiA5Liq5a6a5pe25Zmo5pyq5omn6KGM5a6M55u05o6l5Y+W5raI5omn6KGM77yM5YeP5bCR5a+55pyN5Yqh5Zmo55qE6K+35rGCDQogICAgLy8gICAgIHRpbWVyID0gc2V0VGltZW91dCgoKT0+ew0KICAgIC8vICAgICAgIGZ1bmMuYXBwbHkodGhpcyxhcmdzKSAvLyDosIPnlKhmdW5j5Ye95pWw77yM5o6l5pS2YXJnc+S9nOS4uuWPguaVsA0KICAgIC8vICAgICB9LGRlbGF5KQ0KICAgIC8vICAgfQ0KICAgIC8vIH0sDQogICAgdGFiQ2xpY2sgKGluZGV4KSB7DQogICAgICBzd2l0Y2ggKGluZGV4KSB7DQogICAgICAgIGNhc2UgMDoNCiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3BvcCcNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlIDE6DQogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICduZXcnDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAyOg0KICAgICAgICAgIHRoaXMuY3VycmVudFR5cGU9ICdzZWxsJw0KICAgICAgICAgIGJyZWFrDQogICAgICB9DQogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wxLmN1cnJlbnRJbmRleCA9IGluZGV4DQogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wyLmN1cnJlbnRJbmRleCA9IGluZGV4DQogICAgfSwNCiAgICBiYWNrVG9wICgpIHsNCiAgICAgIC8vIHRoaXMuJHJlZnMuc2Nyb2xsIOWPr+aLv+WIsHNjcm9sbOe7hOS7tuS4reeahOaJgOacieaVsOaNrg0KICAgICAgLy8gdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsLnNjcm9sbFRvKDAsMCwxMDAwKQ0KICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwwKSAvKiDlsIHoo4XkuYvlkI4gKi8NCiAgICB9LA0KICAgIGNvbnRlbnRTY3JvbGwocG9zaXRpb24pIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHBvc2l0aW9uLnkpDQogICAgICAgIC8vIHRoaXMuc2hvd1RvcCA9ICgtcG9zaXRpb24ueSkgPiAxMDAwICDnu53lr7nlgLxNYXRoLmFicw0KICAgICAgICB0aGlzLnNob3dUb3AgPSBNYXRoLmFicyhwb3NpdGlvbi55KSA+IDEwMDANCiAgICAgICAgLy8gMi7orr7nva7lkLjpobbmlYjmnpwNCiAgICAgICAgdGhpcy5pc1RhYkZpeGVkID0gKC1wb3NpdGlvbi55KSA+IHRoaXMudGFiT2Zmc2V0VG9wDQogICAgfSwNCiAgICBsb2FkTW9yZSgpew0KICAgICAgdGhpcy5nZXRIb21lR29vZHModGhpcy5jdXJyZW50VHlwZSkNCiAgICAgIC8vIHRoaXMuJHJlZnMuc2Nyb2xsLmZpbmlzaFB1bGxVcCgpIOWcqOi/memHjOWujOaIkOS4iuaLieWKoOi9veabtOWkmueahOivne+8jOS7peWQjuavj+asoeWGjeivt+axguaVsOaNrumDvei/mOimgeWGjeWGmQ0KICAgIH0sDQogICAgc3dpcGVySW1hZ2VMb2FkICgpIHsNCiAgICAgIC8vIDIu6I635Y+WdGFiT2Zmc2V0VG9w55qEb2Zmc2V0VG9wDQogICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy50YWJDb250cm9sLiRlbC5vZmZzZXRUb3ApOyANCiAgICB0aGlzLnRhYk9mZnNldFRvcCA9IHRoaXMuJHJlZnMudGFiQ29udHJvbDIuJGVsLm9mZnNldFRvcA0KICAgIH0sDQogICAgLy8g572R57uc6K+35rGC55u45YWz5pa55rOVDQogICAgZ2V0SG9tZU11bHRpZGF0YSAoKSB7DQogICAgICBnZXRIb21lTXVsdGlkYXRhKCkudGhlbihyZXMgPT4gew0KICAgIC8vICAgY29uc29sZS5sb2cocmVzKQ0KICAgIC8vIHRoaXMucmVzdWx0ID0gcmVzDQogICAgdGhpcy5iYW5uZXJzID0gcmVzLmRhdGEuYmFubmVyLmxpc3QNCiAgICB0aGlzLnJlY29tbWVuZHMgPSByZXMuZGF0YS5yZWNvbW1lbmQubGlzdA0KICAgIH0pDQogICAgfSwNCiAgICBnZXRIb21lR29vZHMgKHR5cGUpIHsNCiAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgKyAxDQogICAgICBnZXRIb21lR29vZHModHlwZSwgcGFnZSkudGhlbihyZXMgPT4gew0KICAgICAgdGhpcy5nb29kc1t0eXBlXS5saXN0LnB1c2goLi4ucmVzLmRhdGEubGlzdCkNCiAgICAgIHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArPSAxICAvKiDmm7TmlrBkYXRh5Lit55qE6aG156CBICovDQogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5maW5pc2hQdWxsVXAoKSAvLyDosIPnlKjmlrnms5XvvIzlpJrmrKHkuIrmi4nliqDovb3mm7TlpJoNCiAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\r\n    <div id=\"home\">\r\n        <nav-bar class=\"home-nav\">\r\n            <div slot=\"center\">购物街</div>\r\n        </nav-bar>\r\n    <tab-control class=\"tab-control\" \r\n          @tabClick='tabClick'\r\n          :titles='[\"流行\",\"新款\",\"精选\"]'\r\n          v-show=\"isTabFixed\"\r\n          ref=\"tabControl1\"></tab-control>\r\n    <scroll class=\"content\" \r\n          ref=\"scroll\" :probe-type='3' \r\n          @scroll='contentScroll'\r\n          :pull-up-load='true'\r\n          @pullingUp='loadMore'\r\n          :observeImage='true'>\r\n        <home-swiper :banners='banners' @imageLoad='swiperImageLoad'></home-swiper>\r\n        <home-recommend-view :recommends='recommends'></home-recommend-view>\r\n        <feature-view></feature-view>\r\n    <tab-control \r\n            @tabClick='tabClick'\r\n            :titles='[\"流行\",\"新款\",\"精选\"]'\r\n            ref=\"tabControl2\"></tab-control>\r\n        <goods-list :goods='showGoods'></goods-list>\r\n        </scroll>\r\n        <back-top @click.native=\"backTop\" v-show=\"showTop\"></back-top>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 分块放置，优雅，方便管理、维护\r\nimport HomeSwiper from './childComps/HomeSwiper' // 导入的组件放一起\r\nimport HomeRecommendView from './childComps/HomeRecommendView'\r\nimport FeatureView from './childComps/FeatureView'\r\n\r\nimport NavBar from 'components/common/navbar/NavBar'\r\nimport TabControl from 'components/content/tabControl/TabControl'\r\nimport GoodsList from 'components/content/goods/GoodsList'\r\nimport Scroll from 'components/common/scroll/Scroll'\r\nimport BackTop from 'components/content/backTop/BackTop'\r\n\r\nimport { \r\n  getHomeMultidata,\r\n  getHomeGoods\r\n} from 'network/home.js'\r\n// import {debounce} from 'common/utils.js' 混入后就不需要再重复引入了\r\nimport {itemListenerMixin} from 'common/mixin.js'\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    NavBar,\r\n    HomeSwiper,\r\n    HomeRecommendView,\r\n    FeatureView,\r\n    TabControl,\r\n    GoodsList,\r\n    Scroll,\r\n    BackTop\r\n  },\r\n  // 混入\r\n  mixins: [itemListenerMixin],\r\n  data () {\r\n    return {\r\n        // result: null\r\n        banners: [],\r\n        recommends: [],\r\n        goods: {\r\n          'pop': {page: 0, list:[]},\r\n          'new': {page: 0, list:[]},\r\n          'sell': {page: 0, list:[]}\r\n        },\r\n        currentType: 'pop',\r\n        showTop: false,\r\n        tabOffsetTop: 0,\r\n        isTabFixed: false,\r\n        saveY: 0\r\n        // itemImgListener: null 通过混入mixins导入\r\n    }\r\n  },\r\n  computed: { // 页面展示处的代码太复杂，可放在计算属性中封装，使上面的代码简化\r\n    showGoods () {\r\n      return this.goods[this.currentType].list\r\n    }\r\n  },\r\n  // destroyed () {\r\n  //   console.log('home destroyed');\r\n  // },\r\n  activated () {\r\n    // 进入时滚动到离开时的位置this.saveY\r\n    this.$refs.scroll.scrollTo(0, this.saveY, 0)\r\n    this.$refs.scroll.refresh() // 进入时再刷新，避免出现小问题\r\n  },\r\n  deactivated () {\r\n    // 保存离开时的位置信息到this.saveY\r\n    this.saveY = this.$refs.scroll.getScrollY()\r\n    // console.log(this.saveY);\r\n    // 2.取消全局事件监听（主页图片加载的监听）因为此时设置了keep-alive，所以离开时调用的是deactivated()\r\n    this.$bus.$off('itemImageLoad',this.itemImgListener)\r\n  },\r\n  created () {\r\n    // 将created钩子中的代码简化，处理主要逻辑，具体的方法实现交给methods\r\n    // 1.请求多个数据\r\n    this.getHomeMultidata()\r\n    // 2.请求商品数据\r\n    this.getHomeGoods('pop')\r\n    this.getHomeGoods('new')\r\n    this.getHomeGoods('sell')\r\n  },\r\n  mounted () {\r\n    // 利用混入，减少重复代码\r\n    // 1.监听item中图片加载完成，刷新防抖函数放到了utils.js中，工具库\r\n    // const refresh = debounce(this.$refs.scroll.refresh,50)\r\n      // 对监听的事件进行保存，方便离开home组件时取消此事件监听\r\n      // this.itemImgListener = () => { refresh() }\r\n    // this.$bus.$on('itemImageLoad',() => {\r\n      // this.$refs.scroll.refresh()\r\n      // refresh() // 此处是闭包，局部变量不会被销毁\r\n    // })\r\n      // this.$bus.$on('itemImageLoad', this.itemImgListener)\r\n  },\r\n  methods: {\r\n    // 事件监听相关方法\r\n    // debounce(func,delay){ 封装\r\n    //   let timer = null // 此处也是局部变量，但下面形成了闭包，此局部变量就不会被销毁\r\n    //   return function(...args){ // 可让func函数传多个参数\r\n    //     if(timer) clearTimeout(timer) // 如果上一个定时器未执行完直接取消执行，减少对服务器的请求\r\n    //     timer = setTimeout(()=>{\r\n    //       func.apply(this,args) // 调用func函数，接收args作为参数\r\n    //     },delay)\r\n    //   }\r\n    // },\r\n    tabClick (index) {\r\n      switch (index) {\r\n        case 0:\r\n          this.currentType = 'pop'\r\n          break\r\n        case 1:\r\n          this.currentType = 'new'\r\n          break\r\n        case 2:\r\n          this.currentType= 'sell'\r\n          break\r\n      }\r\n      this.$refs.tabControl1.currentIndex = index\r\n      this.$refs.tabControl2.currentIndex = index\r\n    },\r\n    backTop () {\r\n      // this.$refs.scroll 可拿到scroll组件中的所有数据\r\n      // this.$refs.scroll.scroll.scrollTo(0,0,1000)\r\n      this.$refs.scroll.scrollTo(0,0) /* 封装之后 */\r\n    },\r\n    contentScroll(position) {\r\n      // console.log(position.y)\r\n        // this.showTop = (-position.y) > 1000  绝对值Math.abs\r\n        this.showTop = Math.abs(position.y) > 1000\r\n        // 2.设置吸顶效果\r\n        this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n    },\r\n    loadMore(){\r\n      this.getHomeGoods(this.currentType)\r\n      // this.$refs.scroll.finishPullUp() 在这里完成上拉加载更多的话，以后每次再请求数据都还要再写\r\n    },\r\n    swiperImageLoad () {\r\n      // 2.获取tabOffsetTop的offsetTop\r\n    // console.log(this.$refs.tabControl.$el.offsetTop); \r\n    this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop\r\n    },\r\n    // 网络请求相关方法\r\n    getHomeMultidata () {\r\n      getHomeMultidata().then(res => {\r\n    //   console.log(res)\r\n    // this.result = res\r\n    this.banners = res.data.banner.list\r\n    this.recommends = res.data.recommend.list\r\n    })\r\n    },\r\n    getHomeGoods (type) {\r\n      const page = this.goods[type].page + 1\r\n      getHomeGoods(type, page).then(res => {\r\n      this.goods[type].list.push(...res.data.list)\r\n      this.goods[type].page += 1  /* 更新data中的页码 */\r\n      this.$refs.scroll.finishPullUp() // 调用方法，多次上拉加载更多\r\n    })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 加上scoped，表示当前的样式只作用于当前组件 */\r\n#home{\r\n  /* padding: 44px 0 64px; */\r\n  /* vh viewport height 视口高度，100vh就是整个视口高度，50vh是50%的高度 */\r\n  height: 100vh;\r\n  position: relative;\r\n}\r\n.home-nav {\r\n    background-color: var(--color-tint);\r\n    color: #fff;\r\n    /* position: fixed;\r\n    right: 0;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 9; */\r\n    /* position: relative; 下面加了overflow，这里就不用设置了\r\n    z-index: 9; */\r\n}\r\n/* .tab-control {\r\n  position: sticky;\r\n  top: 44px;\r\n  z-index: 9;\r\n} */\r\n.content {\r\n  /* 方法一：计算\r\n  height: calc(100% - 98px); \r\n  overflow:hidden;\r\n  margin-top:44px*/\r\n  overflow: hidden;\r\n  position: absolute;\r\n  top: 44px;\r\n  bottom: 49px;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n.tab-control {\r\n  position: relative;\r\n  z-index: 9;\r\n}\r\n</style>\r\n"]}]}